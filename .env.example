# ═══════════════════════════════════════════════════════════════════════════════
# GitHub Backup - Environment Configuration
# ═══════════════════════════════════════════════════════════════════════════════
# Copy this file to .env and fill in your values
# ═══════════════════════════════════════════════════════════════════════════════

# ───────────────────────────────────────────────────────────────────────────────
# GitHub Configuration
# ───────────────────────────────────────────────────────────────────────────────

# Organization or username to backup
GITHUB_OWNER=my-organization

# Personal Access Token
# Required permissions: repo (or public_repo), read:org
GITHUB_PAT=ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Include private repositories (requires 'repo' scope)
GITHUB_BACKUP_PRIVATE=true

# Include forked repositories
GITHUB_BACKUP_FORKS=false

# Include archived repositories
GITHUB_BACKUP_ARCHIVED=true

# ───────────────────────────────────────────────────────────────────────────────
# Backup Configuration
# ───────────────────────────────────────────────────────────────────────────────

# Number of backup copies to retain (older backups will be deleted)
BACKUP_RETENTION_COUNT=7

# Include metadata (issues, pull requests, releases)
BACKUP_INCLUDE_METADATA=true

# Include wiki repositories
BACKUP_INCLUDE_WIKI=true

# Incremental backup: only backup repos that changed since last backup
# Set to false for full backup every time
BACKUP_INCREMENTAL=true

# ───────────────────────────────────────────────────────────────────────────────
# Scheduler Configuration
# ───────────────────────────────────────────────────────────────────────────────

# Enable scheduled backups
BACKUP_SCHEDULE_ENABLED=true

# Schedule mode: daily, weekly, or interval
# - daily:    Run at fixed time every day (or specific days)
# - weekly:   Run at fixed time once per week
# - interval: Run every N hours
BACKUP_SCHEDULE_MODE=daily

# Time to run backup (for daily/weekly mode)
BACKUP_SCHEDULE_HOUR=2
BACKUP_SCHEDULE_MINUTE=0

# Day of week for backup (0=Mon, 1=Tue, ..., 6=Sun)
# - "*" for all days (daily mode default)
# - "0" for Monday only (weekly mode)
# - "0,2,4" for Mon, Wed, Fri
BACKUP_SCHEDULE_DAY_OF_WEEK=*

# Hours between backups (for interval mode, 1-168)
# BACKUP_SCHEDULE_INTERVAL_HOURS=24

# ───────────────────────────────────────────────────────────────────────────────
# S3/MinIO Configuration
# ───────────────────────────────────────────────────────────────────────────────

# S3-compatible endpoint URL
S3_ENDPOINT_URL=https://minio.example.com

# Bucket name for backups
S3_BUCKET=github-backups

# Access credentials
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin

# Region (required for signature)
S3_REGION=eu-north-1

# Multipart upload configuration
# Files larger than threshold use multipart upload with equal-sized chunks
# S3_MULTIPART_THRESHOLD=104857600
# S3_MULTIPART_CHUNK_SIZE=52428800

# ───────────────────────────────────────────────────────────────────────────────
# Alerting Configuration
# ───────────────────────────────────────────────────────────────────────────────

# Enable alerting system
ALERT_ENABLED=false

# Alert level: errors (only failures), warnings (failures + warnings), all (include success)
ALERT_LEVEL=errors

# Active alert channels (comma-separated): email, webhook, teams
ALERT_CHANNELS=

# --- SMTP Email Configuration ---
# SMTP server hostname
SMTP_HOST=
# SMTP server port (587 for TLS/STARTTLS, 465 for SSL)
SMTP_PORT=587
# Use TLS/STARTTLS (recommended for port 587)
SMTP_TLS=true
# Use SSL (for port 465)
SMTP_SSL=false
# SMTP authentication (leave empty for anonymous)
SMTP_USER=
SMTP_PASSWORD=
# Sender email address
SMTP_FROM=
# Sender display name
SMTP_FROM_NAME=GitHub Backup
# Recipients (comma-separated)
SMTP_TO=

# --- Generic Webhook Configuration ---
# Webhook URL for JSON POST alerts
WEBHOOK_URL=
# Optional HMAC secret for signature (X-Signature header)
WEBHOOK_SECRET=

# --- Microsoft Teams Configuration ---
# Teams Webhook URL (from Workflows or legacy Incoming Webhook)
TEAMS_WEBHOOK_URL=

# ───────────────────────────────────────────────────────────────────────────────
# Application Configuration
# ───────────────────────────────────────────────────────────────────────────────

# Timezone (e.g., Europe/Vienna, America/New_York, Etc/UTC)
TZ=Etc/UTC

# Log level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO
